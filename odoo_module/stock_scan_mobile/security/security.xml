<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Security Groups -->
        <record id="group_mobile_user" model="res.groups">
            <field name="name">Mobile App User</field>
            <field name="category_id" ref="base.module_category_inventory_management"/>
            <field name="comment">Users who can access the mobile stock scanning application</field>
        </record>
        
        <record id="group_mobile_manager" model="res.groups">
            <field name="name">Mobile App Manager</field>
            <field name="category_id" ref="base.module_category_inventory_management"/>
            <field name="implied_ids" eval="[(4, ref('group_mobile_user'))]"/>
            <field name="comment">Managers who can configure mobile app settings and view all mobile operations</field>
        </record>
        
        <!-- Add mobile groups to stock users -->
        <record id="stock.group_stock_user" model="res.groups">
            <field name="implied_ids" eval="[(4, ref('group_mobile_user'))]"/>
        </record>
        
        <record id="stock.group_stock_manager" model="res.groups">
            <field name="implied_ids" eval="[(4, ref('group_mobile_manager'))]"/>
        </record>
        
        <!-- Record Rules -->
        <record id="rule_stock_picking_mobile_user" model="ir.rule">
            <field name="name">Stock Picking: Mobile Users</field>
            <field name="model_id" ref="stock.model_stock_picking"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mobile_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        
        <record id="rule_stock_move_mobile_user" model="ir.rule">
            <field name="name">Stock Move: Mobile Users</field>
            <field name="model_id" ref="stock.model_stock_move"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mobile_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        
        <record id="rule_stock_move_line_mobile_user" model="ir.rule">
            <field name="name">Stock Move Line: Mobile Users</field>
            <field name="model_id" ref="stock.model_stock_move_line"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mobile_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>
        
        <record id="rule_stock_production_lot_mobile_user" model="ir.rule">
            <field name="name">Stock Production Lot: Mobile Users</field>
            <field name="model_id" ref="stock.model_stock_production_lot"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mobile_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        
        <record id="rule_product_product_mobile_user" model="ir.rule">
            <field name="name">Product: Mobile Users</field>
            <field name="model_id" ref="product.model_product_product"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_mobile_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        
        <record id="rule_stock_quant_mobile_user" model="ir.rule">
            <field name="name">Stock Quant: Mobile Users</field>
            <field name="model_id" ref="stock.model_stock_quant"/>
            <field name="domain_force">[('company_id', 'in', company_ids)]</field>
            <field name="groups" eval="[(4, ref('group_mobile_user'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        
        <!-- API Rate Limiting Configuration -->
        <record id="config_mobile_api_rate_limit" model="ir.config_parameter">
            <field name="key">stock_scan_mobile.api_rate_limit</field>
            <field name="value">100</field> <!-- requests per minute per user -->
        </record>
        
        <record id="config_mobile_token_expiry" model="ir.config_parameter">
            <field name="key">stock_scan_mobile.token_expiry_hours</field>
            <field name="value">24</field> <!-- token valid for 24 hours -->
        </record>
        
        <record id="config_mobile_max_batch_size" model="ir.config_parameter">
            <field name="key">stock_scan_mobile.max_batch_size</field>
            <field name="value">100</field> <!-- max serial numbers per batch -->
        </record>
        
        <record id="config_mobile_cors_origins" model="ir.config_parameter">
            <field name="key">stock_scan_mobile.cors_origins</field>
            <field name="value">*</field> <!-- CORS allowed origins -->
        </record>
        
    </data>
</odoo>
